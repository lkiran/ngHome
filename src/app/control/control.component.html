<div class="card">
  <form (ngSubmit)="save(controlForm)" [formGroup]="controlForm">
    <input type="hidden" id="Id" formControlName="Id">

    <div class="card-header">
      <input class="form-control header" type="text" formControlName="Name" placeholder="Kontrol İsmi Girin"/>
    </div>

    <div class="card-block">

      <div class="mb-3">

        <div class="mb-3 bottom-guide">
          <span class="lead">Görevler</span><span class="badge badge-pill badge-info">{{Control.Tasks?.length}}</span>
          <a class="float-right text-info" (click)="AddNewTask()"><i class="fa fa-plus"></i> Görev Ekle</a>
        </div>
        <div formArrayName="Tasks" *ngFor="let task of Control.Tasks; let i=index">
          <control-task
            [formGroupName]="i"
            [taskGroup]="TaskArray.controls[i]"
            [task]="task">
          </control-task>
        </div>

      </div>

      <div class="mb-3">
        <div class="mb-3 bottom-guide">
          <span class="lead">Koşullar</span><span
          class="badge badge-pill badge-info">{{Control.Conditions?.length}}</span>
          <a class="float-right text-info" (click)="AddNewCondition()"><i class="fa fa-plus"></i> Koşul Ekle</a>
        </div>

        <div formArrayName="Conditions" *ngFor="let condition of Control.Conditions; let i=index">
          <control-condition
            [formGroupName]="i"
            [conditionGroup]="ConditionArray.controls[i]"
            [condition]="condition">
          </control-condition>
        </div>

      </div>

      <button type="submit" class="btn btn-info">Kaydet</button>
      <button class="btn btn-outline-danger" (click)="CancelNewControl()" *ngIf="Control.Id==''">İptal</button>

    </div>

    <div class="card-footer">{{controlForm.value | json}}</div>

  </form>

</div>

